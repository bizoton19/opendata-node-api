webpackJsonp([0],[,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.d(t,"eventBus",function(){return f});var a=s(2),n=s(8),r=s.n(n),i=s(6),c=s(10),o=s.n(c),u=s(7),l=(s.n(u),s(11)),d=s(3),h=s.n(d),g=s(9),p=s.n(g);a.default.config.productionTip=!1,a.default.use(o.a),a.default.use(l.a),a.default.use(p.a,h.a);var f=new a.default({methods:{publishSearchAggregations:function(e){this.$emit("newAggsReceived",e)},publishPageSelection:function(e){this.$emit("newPageSelected",e)}}});a.default.filter("capitalize",function(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""}),new a.default({el:"#app",router:i.a,template:"<App/>",components:{App:r.a}})},,,function(e,t,s){function a(e){s(21)}var n=s(0)(s(15),s(33),a,"data-v-55df27b5",null);e.exports=n.exports},,function(e,t,s){"use strict";var a=s(2),n=s(38),r=s(28),i=s.n(r);a.default.use(n.a),t.a=new n.a({routes:[{path:"/",name:"searchPageContainer",component:i.a}]})},function(e,t){},function(e,t,s){function a(e){s(20)}var n=s(0)(s(12),s(32),a,null,null);e.exports=n.exports},,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(4);s.n(a);t.default={name:"app"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(30),n=s.n(a),r=s(29),i=s.n(r),c=s(1);t.default={name:"search",components:{searchPagination:i.a,searchResults:n.a,eventBus:c.eventBus},props:{searchinput:{required:!1,type:String}},data:function(){return{stats:{took:Number,total:Number,totalPages:Number,maxScore:Number,resultCount:Number},pageselected:1,searchSettings:{size:10,from:Number,dataType:String},response:null,dataTypes:[],hasResults:!1,isSearchComplete:!1,searchButtonclicked:!1,fetchStatus:null,responseEvent:null,wasComponentUpdated:!1}},watch:{searchinput:function(e){var t=this;t.fetchStatus="Waiting for input...",t.search(e)},pageselected:function(e){var t=this;console.log("watching page just turned to ",e),console.log("watching  ",this.searchinput),t.search(t.searchinput)}},computed:{showSpinner:function(){return this.searchButtonclicked&&!this.isSearchComplete&&null===this.fetchStatus},noResult:function(){return this.searchButtonclicked&&!this.hasResults&&null!=this.searchinput}},created:function(){},methods:{displayWhenHasResults:function(){return"Found: "+this.stats.total+" records in "+this.stats.took+" ms, Max Relevance Score : "+this.stats.maxScore+", Displaying top: "+this.stats.resultCount+" results containing "+this.searchinput},searchButtonclickedOrsearchinputNullDisplay:function(){return this.searchinput?"Query="+this.searchinput:"Please enter a query"},resetFormItems:function(){var e=this;e.searchButtonclicked=!0,e.isSearchComplete=!1,e.hasResults=!1,c.eventBus.$emit("noResult",e.hasResults),e.stats.resultCount=0,e.fetchStatus=null,e.stats.totalPages=[]},filterResponseData:function(e){var t=this,s=e.data;t.stats.took=s.took,t.stats.total=s.docCount,t.stats.maxScore=s.maxScore,t.stats.totalPages=s.totalPages,t.stats.resultCount=Math.ceil(s.docCount/s.totalPages),t.response=s.artifacts,this.hasResults=!0},search:function(e){var t=this,s=this;s.resetFormItems();var a=parseInt(s.pageselected);if(0==e.length||null===e.length)return void(s.isSearchComplete=!0);console.log("pageSelected has changed, is now ",a),s.$http.post("/search",{FullText:this.searchinput,Filter:{Source:"",Type:"",StartDate:"1970-01-01",EndDate:"2019-01-01"},StartPage:isNaN(a)?1:a,NumPerPage:s.searchSettings.size}).then(function(e){e.data.docCount>0&&t.filterResponseData(e),c.eventBus.$emit("newAggsReceived",e.data.aggregation),s.isSearchComplete=!0}).catch(function(e){console.log("could not reach API "+e),this.fetchStatus="Communication with the back end server failed...please try again later"})}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(1);t.default={name:"SearchAggregation",components:{eventBus:a.eventBus},data:function(){return{aggsCheckboxes:[],aggregations:{artifactTypes:[],artifactSources:[]},hasResult:!1}},computed:{typePartitions:function(){return this.aggregations.artifactTypes},sourcePartitions:function(){return this.aggregations.artifactSources}},methods:{},created:function(){var e=this;a.eventBus.$on("noResult",function(t){e.hasResult=t,console.log("SearchAggregation Created and has result is : "+e.hasResult)}),console.log("SearchAggregation Created and has result is : "+e.hasResult+" new aggs received "),a.eventBus.$on("newAggsReceived",function(t){e.aggregations.artifactTypes=t.artifact_type.buckets,e.aggregations.artifactSources=t.artifact_source.buckets})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(3),n=s.n(a),r=s(26),i=s.n(r);t.default={name:"searchInitiator",components:{search:i.a},data:function(){return{searchquery:null}},methods:{search:n.a.debounce(function(e){this.searchquery=e},1e4)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(4),n=s.n(a),r=s(27),i=s.n(r),c=s(1);t.default={name:"searchPageContainer",components:{searchInitiator:n.a,searchAggregation:i.a,eventBus:c.eventBus},data:function(){return{hasResults:!1}},created:function(){var e=this;c.eventBus.$on("newAggsReceived",function(t){console.log("event received by searchPageContainer"+t),e.hasResults=!0})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"searchPagination",components:{},props:{totalPages:{required:!0,type:Number},currPage:{required:!0,type:Number}},data:function(){return{pageSelectedEventName:"pageSelected",pagesVisible:Number,pages:[],selectedPage:1,nextPage:Number,prevPage:Number,lastPage:Number,firstPage:1}},watch:{currPage:function(e){this.selectedPage=e}},created:function(){this.selectedPage=1,this.lastPage=this.totalPages,this.pagesVisible=this.totalPages>0?10:this.totalPages,this.pages=[];var e=0,t=this.pagesVisible;this.currPage>=this.pagesVisible&&(t=this.totalPages,e=this.pagesVisible);for(var s=e;s<t;s++)s>0&&this.pages.push(s)},methods:{onPageSelect:function(e){this.selectedPage=e,this.$emit("pageSelected",this.selectedPage)},onNextPage:function(){this.nextPage=this.currPage===this.totalPages?this.totalPages:this.currPage+1,this.onPageSelect(this.nextPage)},onPrevPage:function(){this.prevPage=this.currPage===this.firstPage?this.firstPage:this.currPage-1,this.onPageSelect(this.prevPage)},onLastPage:function(){this.onPageSelect(this.totalPages)},onFirstPage:function(){this.onPageSelect(this.firstPage)}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s(1);t.default={name:"searchResults",components:{},props:{results:{required:!0}},computed:{},data:function(){return{}},methods:{},created:function(){}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,s){e.exports=s.p+"static/img/logo.939f93b.png"},function(e,t,s){function a(e){s(23)}var n=s(0)(s(13),s(36),a,null,null);e.exports=n.exports},function(e,t,s){var a=s(0)(s(14),s(35),null,null,null);e.exports=a.exports},function(e,t,s){function a(e){s(19)}var n=s(0)(s(16),s(31),a,"data-v-1d1e0090",null);e.exports=n.exports},function(e,t,s){function a(e){s(24)}var n=s(0)(s(17),s(37),a,"data-v-f0ef0ef8",null);e.exports=n.exports},function(e,t,s){function a(e){s(22)}var n=s(0)(s(18),s(34),a,null,null);e.exports=n.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row",attrs:{id:"searchContainer"}},[s("div",{staticClass:"row"},[e.hasResults?s("search-aggregation"):e._e()],1),e._v(" "),s("div",{staticClass:"row"},[s("search-initiator")],1)])},staticRenderFns:[]}},function(e,t,s){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"app"}},[a("img",{attrs:{src:s(25)}}),e._v(" "),a("md-boards",{attrs:{"md-auto":!0,"md-infinite":!1,"md-duration":2e4,"md-swipeable":!0,"md-controls":!0}},[a("md-board",{attrs:{id:"slide1"}},[a("h4",[e._v("Welcome to the unified open data search tool")])]),e._v(" "),a("md-board",{attrs:{id:"slide2"}},[a("h4",[e._v("\r\n      You can start by looking at our data inventories"),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("view_day")]),e._v(" and their discriptions.\r\n    ")],1)]),e._v(" "),a("md-board",{attrs:{id:"slide3"}},[a("h4",[e._v("You can also navigate to your reporting\r\n  section to generate "),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("receipt")]),e._v(" reports,\r\n   "),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("timeline")]),e._v("\r\n  charts and graphs.")],1)])],1),e._v(" "),a("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"searchinput"}},[s("md-card",{attrs:{"md-with-hover":""}},[s("md-card-header",[e._v(" Search Open Datasets")]),e._v(" "),s("md-card-actions",[s("md-input-container",[s("label",[e._v("Search")]),e._v(" "),s("md-input",{attrs:{placeholder:"Search by type, title or description etc. ",id:"searchquery"},model:{value:e.searchquery,callback:function(t){e.searchquery=t},expression:"searchquery"}}),e._v(" "),s("a",{attrs:{href:"#"},on:{click:function(t){e.search(e.query)}}},[s("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("search")])],1)],1)],1)],1),e._v(" "),s("search",{attrs:{searchinput:e.searchquery}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-tabs",{staticClass:"md-transparent",attrs:{"md-centered":"","md-elevation":"2"}},[s("md-tab",{attrs:{"md-label":"Data (LIST)","md-icon":"note"}},[s("md-ink-ripple"),e._v(" "),s("md-card",e._l(e.results,function(t){return s("md-list",{key:t.uuid},[s("md-list-item",[s("md-avatar",[s("md-icon",{staticClass:"md-size-2x green"},[e._v("cached")])],1),e._v(" "),s("div",{staticClass:"md-list-text-container"},[s("h2",[s("a",{attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.title))])]),e._v(" "),s("h3",[e._v("Category: "+e._s(t.category))]),e._v(" "),s("p",[e._v("Type: "+e._s(e._f("capitalize")(t.type)))]),e._v(" "),s("span",[e._v(e._s(e._f("capitalize")(t.type))+" Date: "+e._s(t.artifactDate))]),e._v(" "),s("p",[e._v(e._s(t.description))])]),e._v(" "),s("a",{staticClass:"md-icon-button md-list-action",attrs:{href:t.url,target:"_blank"}},[s("md-icon",{staticClass:"md-primary"},[e._v("arrow_forward")])],1)],1),e._v(" "),s("md-divider",{staticClass:"md-inset"})],1)}))],1),e._v(" "),s("md-tab",{attrs:{"md-label":"Images","md-icon":"collections"}},e._l(e.results,function(t,a){return s("md-list",{key:t.uuid},[s("md-list-item",e._l(t.images,function(a,n){return s("md-card",{attrs:{"md-with-hover":""}},[s("md-card-media",{attrs:{"md-ratio":"4:3"}},[s("a",{attrs:{href:t.url,target:"_blank"}},[s("img",{attrs:{src:a.uRL,alt:"open data"}})])]),e._v(" "),s("md-card-content",[e._v("\n    "+e._s(t.title)+"\n  ")]),e._v(" "),s("md-card-actions",[s("md-button",[e._v("Go")])],1)],1)}))],1)}))],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"searchAggs"}},[s("div",{staticClass:"well"},[e._l(e.typePartitions,function(t){return s("span",{key:t.key},[s("span",[s("h4",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.aggsCheckboxes,expression:"aggsCheckboxes"}],attrs:{type:"checkbox",id:"type"},domProps:{value:t.key,checked:Array.isArray(e.aggsCheckboxes)?e._i(e.aggsCheckboxes,t.key)>-1:e.aggsCheckboxes},on:{__c:function(s){var a=e.aggsCheckboxes,n=s.target,r=!!n.checked;if(Array.isArray(a)){var i=t.key,c=e._i(a,i);r?c<0&&(e.aggsCheckboxes=a.concat(i)):c>-1&&(e.aggsCheckboxes=a.slice(0,c).concat(a.slice(c+1)))}else e.aggsCheckboxes=r}}}),e._v(" "),s("label",{staticClass:"label label-default",attrs:{for:"type-check"}},[e._v(e._s(e._f("capitalize")(t.key))+"("+e._s(t.doc_count)+")")])])])])}),e._v(" "),e._l(e.sourcePartitions,function(t){return s("span",{key:t.key},[s("h4",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.aggsCheckboxes,expression:"aggsCheckboxes"}],attrs:{type:"checkbox",id:"artifactsource"},domProps:{value:t.key,checked:Array.isArray(e.aggsCheckboxes)?e._i(e.aggsCheckboxes,t.key)>-1:e.aggsCheckboxes},on:{__c:function(s){var a=e.aggsCheckboxes,n=s.target,r=!!n.checked;if(Array.isArray(a)){var i=t.key,c=e._i(a,i);r?c<0&&(e.aggsCheckboxes=a.concat(i)):c>-1&&(e.aggsCheckboxes=a.slice(0,c).concat(a.slice(c+1)))}else e.aggsCheckboxes=r}}}),e._v(" "),s("label",{staticClass:"label label-default",attrs:{for:"source-check"}},[e._v(e._s(e._f("capitalize")(t.key))+"("+e._s(t.doc_count)+")")])])])}),e._v(" "),s("p",[e._v(e._s(e.aggsCheckboxes))])],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"search"}},[s("br"),e._v(" "),null!=e.fetchStatus?s("p",[e._v(e._s(e.fetchStatus))]):e._e(),e._v(" "),e.hasResults?s("p",[e._v(e._s(e.displayWhenHasResults()))]):e._e(),e._v(" "),e.noResult&&e.isSearchComplete&&null==e.fetchStatus?s("p",[s("md-icon",{staticClass:"md-size-1x md-warn"},[e._v("help")]),e._v(" search returned no result please try another query")],1):e._e(),e._v(" "),e.searchButtonclicked&&null!==e.searchinput?e._e():s("p",[s("md-icon",{staticClass:"md-size-1x md-warn"},[e._v("help_outline")]),e._v("\n    "+e._s(e.searchButtonclickedOrsearchinputNullDisplay())+"\n  ")],1),e._v(" "),e.showSpinner?s("md-spinner",{staticClass:"md-warn",attrs:{"md-size":60,"md-indeterminate":""}}):e._e(),e._v(" "),e.hasResults?s("search-results",{attrs:{results:e.response}}):e._e(),e._v(" "),e.hasResults?s("search-pagination",{attrs:{totalPages:e.stats.totalPages,currPage:e.pageselected},on:{pageSelected:function(t){e.pageselected=t}}}):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"pagination"},[s("a",{attrs:{href:"#"},on:{click:function(t){e.onPrevPage()}}},[s("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("skip_previous")])],1),e._v(" "),e.currPage>=e.pagesVisible?s("a",{on:{click:function(t){e.onFirstPage()}}},[s("strong",[e._v(e._s(e.firstPage))])]):e._e(),e._v(" "),e._l(e.pages,function(t,a){return s("a",{key:t,class:{active:e.pages[a]==e.currPage},attrs:{id:t},on:{click:function(t){e.onPageSelect(e.pages[a])}}},[e._v(e._s(e.pages[a]))])}),e._v(" "),e._m(0),e._v(" "),s("a",{on:{click:function(t){e.onLastPage()}}},[s("strong",[e._v(e._s(e.lastPage))])]),e._v(" "),s("a",{attrs:{href:"#"},on:{click:function(t){e.onNextPage()}}},[s("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("skip_next")])],1)],2)])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",[s("strong",[e._v("......")])])}]}},,,,function(e,t){}],[1]);
//# sourceMappingURL=app.8e9de32220271deea251.js.map