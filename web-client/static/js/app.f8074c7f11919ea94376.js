webpackJsonp([0],[function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.d(t,"eventBus",function(){return v});var a=s(2),n=s(8),r=s.n(n),i=s(6),c=s(10),o=s.n(c),l=s(7),u=(s.n(l),s(11)),d=s(3),m=s.n(d),h=s(9),p=s.n(h);a.default.config.productionTip=!1,a.default.use(o.a),a.default.use(u.a),a.default.use(p.a,m.a);var v=new a.default({methods:{reloadSearchData:function(){this.$emit("newSearchRequested","search")}}});new a.default({el:"#app",router:i.a,template:"<App/>",components:{App:r.a}})},,,,function(e,t,s){var a=s(1)(s(13),s(23),null,null,null);e.exports=a.exports},,function(e,t,s){"use strict";var a=s(2),n=s(26),r=s(4),i=s.n(r);a.default.use(n.a),t.a=new n.a({routes:[{path:"/",name:"search",component:i.a}]})},function(e,t){},function(e,t,s){function a(e){s(16)}var n=s(1)(s(12),s(22),a,null,null);e.exports=n.exports},,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(4);s.n(a);t.default={name:"app"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(21),n=s.n(a),r=s(20),i=s.n(r),c=s(3),o=s.n(c);s(0);t.default={name:"search",components:{recallListResults:n.a,neissListResults:i.a},data:function(){return{stats:{took:Number,total:Number,maxScore:Number},searchSettings:{size:10,from:Number,dataType:String},dataContainer:{recalls:[],incidentReports:[],neiss:[],violations:[]},response:null,dataTypes:[],searchquery:null,hasResults:!1,resultCount:0,isSearchComplete:!1,searchButtonclicked:!1,fetchStatus:null,responseEvent:null,wasComponentUpdated:!1}},watch:{searchquery:function(e){var t=this;t.fetchStatus="Waiting for input...",t.search(e)}},computed:{noResult:function(){return this.searchButtonclicked&&!this.hasResults&&null!=this.searchquery}},methods:{displayWhenHasResults:function(){return"Found: "+this.stats.total+" records in "+this.stats.took+" ms,Max Relevance Score : "+this.stats.maxscore+", Displaying top: "+this.resultCount+" results containing "+this.searchquery},searchButtonclickedOrSearchqueryNullDisplay:function(){return this.searchquery?"Query="+this.searchquery:"Please enter a query"},resetFormItems:function(){var e=this;e.searchButtonclicked=!0,e.isSearchComplete=!1,e.hasResults=!1,e.resultCount=0,e.dataContainer.recalls=[],e.dataContainer.neiss=[],e.fetchStatus=null},filterResponseData:function(e){var t=this;t.hasResults=!0,t.resultCount=t.searchSettings.size},search:o.a.debounce(function(e){var t=this;t.resetFormItems();if(0==e.length||null===e.length)return void(t.isSearchComplete=!0);t.$http.post("/search",{FullText:this.searchquery,Filter:{Type:"",StartDate:"01-01-1970",EndDate:"01-01-2018"},StartPage:"1",NumPerPage:"20"}).then(function(e){console.log(e.status),console.log(e.statusText);var s=e.data.results;t.stats.took=s.took,t.stats.total=s.hits.total,t.stats.maxscore=s.hits.max_score,t.responseEvent=s,t.response=s,console.log(t.response),t.filterResponseData(s),t.isSearchComplete=!0}).catch(function(e){console.log("could not reach API "+e),this.fetchStatus="Communication with the back end server failed...please try again later"})},450)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(0);t.default={name:"neissListResults",components:{},props:{response:{required:!1}},computed:{filteredNeissData:function(){var e=this;e.neiss=[];for(var t=e.response.hits.hits,s=0;s<t.length;s++){var a=t[s]._source,n=t[s]._type;console.log(a),"neiss"===n&&e.neiss.push(a)}return e.neiss}},data:function(){return{neiss:[]}},methods:{},created:function(){console.log("i was just created"),a.eventBus.$on("newSearchRequested",function(e){console.log(e)})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s(0);t.default={name:"recallListResults",components:{},props:{response:{required:!0}},computed:{filteredRecallData:function(){var e=this;e.recall=[];for(var t=e.response.hits.hits,s=0;s<t.length;s++){var a=t[s]._source;"recall"===t[s]._type&&e.recall.push(a)}return e.recall}},data:function(){return{recall:[],searchData:null}},methods:{filterbyDataSetType:function(e){var t=this;t.recall=[];for(var s=e.hits.hits,a=0;a<s.length;a++){var n=s[a]._source,r=s[a]._type;console.log(n),"recall"===r&&t.recall.push(n)}return t.recall}},created:function(){console.log("was just created")}}},function(e,t){},function(e,t){},function(e,t){},function(e,t,s){e.exports=s.p+"static/img/logo.939f93b.png"},function(e,t,s){function a(e){s(18)}var n=s(1)(s(14),s(25),a,null,null);e.exports=n.exports},function(e,t,s){function a(e){s(17)}var n=s(1)(s(15),s(24),a,null,null);e.exports=n.exports},function(e,t,s){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"app"}},[a("img",{attrs:{src:s(19)}}),e._v(" "),a("md-boards",{attrs:{"md-auto":!0,"md-infinite":!1,"md-duration":2e4,"md-swipeable":!0,"md-controls":!0}},[a("md-board",{attrs:{id:"slide1"}},[a("h4",[e._v("Welcome to the unified open data search tool")])]),e._v(" "),a("md-board",{attrs:{id:"slide2"}},[a("h4",[e._v("\r\n      You can start by looking at our data inventories"),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("view_day")]),e._v(" and their discriptions.\r\n    ")],1)]),e._v(" "),a("md-board",{attrs:{id:"slide3"}},[a("h4",[e._v("You can also navigate to your reporting\r\n  section to generate "),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("receipt")]),e._v(" reports,\r\n   "),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("timeline")]),e._v("\r\n  charts and graphs.")],1)])],1),e._v(" "),a("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"search"}},[s("md-card",{attrs:{"md-with-hover":""}},[s("md-card-header",[e._v(" Search Open Datasets")]),e._v(" "),s("md-card-actions",[s("md-input-container",[s("label",[e._v("Search")]),e._v(" "),s("md-input",{attrs:{placeholder:"Search by type, title or description etc. ",id:"searchquery"},model:{value:e.searchquery,callback:function(t){e.searchquery=t},expression:"searchquery"}}),e._v(" "),s("a",{attrs:{href:"#"},on:{click:function(t){e.search(e.searchquery)}}},[s("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("search")])],1)],1)],1)],1),e._v(" "),s("br"),e._v(" "),null!=e.fetchStatus?s("p",[e._v(e._s(e.fetchStatus))]):e._e(),e._v(" "),e.hasResults?s("p",[e._v(e._s(e.displayWhenHasResults()))]):e._e(),e._v(" "),e.noResult&&e.isSearchComplete&&null==e.fetchStatus?s("p",[s("md-icon",{staticClass:"md-size-1x md-warn"},[e._v("help")]),e._v(" search returned no result please try another query")],1):e._e(),e._v(" "),e.searchButtonclicked&&null!==e.searchquery?e._e():s("p",[s("md-icon",{staticClass:"md-size-1x md-warn"},[e._v("help_outline")]),e._v("\n    "+e._s(e.searchButtonclickedOrSearchqueryNullDisplay())+"\n  ")],1),e._v(" "),e.searchButtonclicked&&!e.isSearchComplete&&null===e.fetchStatus?s("md-spinner",{staticClass:"md-warn",attrs:{"md-size":60,"md-indeterminate":""}}):e._e(),e._v(" "),e.hasResults?s("recallListResults",{attrs:{response:e.response}}):e._e(),e._v(" "),e.hasResults?s("neissListResults",{attrs:{response:e.response}}):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h3",[e._v("Recalls")]),e._v(" "),s("md-ink-ripple"),e._v(" "),s("md-card",e._l(e.filteredRecallData,function(t){return s("md-list",{key:t.recallNumber},[s("md-list-item",[s("md-avatar",[s("md-icon",{staticClass:"md-size-2x green"},[e._v("cached")])],1),e._v(" "),s("div",{staticClass:"md-list-text-container"},[s("h2",[s("a",{attrs:{href:t.uRL,target:"_blank"}},[e._v(e._s(t.title))])]),e._v(" "),s("span",[e._v("Recall Date: "+e._s(t.recallDate))]),e._v(" "),s("p",[e._v(e._s(t.description))]),e._v(" "),s("md-list-item",{attrs:{"md-expand-multiple":""}},[s("span",[e._v("Products")]),e._v(" "),s("md-list-expand",e._l(t.products,function(t){return s("md-list",[s("md-list-item",{staticClass:"md-dense md-inset "},[s("span",[e._v(e._s(t.type))])])],1)}))],1),e._v(" "),s("md-list-item",{attrs:{"md-expand-multiple":""}},[s("span",[e._v("Injuries")]),e._v(" "),s("md-list-expand",e._l(t.injuries,function(t){return s("md-list",[s("md-list-item",{staticClass:"md-inset"},[s("span",[e._v(e._s(t.name))])])],1)}))],1)],1),e._v(" "),s("a",{staticClass:"md-icon-button md-list-action",attrs:{href:t.uRL,target:"_blank"}},[s("md-icon",{staticClass:"md-primary"},[e._v("arrow_forward")])],1)],1),e._v(" "),s("md-divider",{staticClass:"md-inset"})],1)}))],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h3",[e._v("Neiss")]),e._v(" "),s("md-card",e._l(e.filteredNeissData,function(t){return s("md-list",{key:t.cpscCaseNumber},[s("md-list-item",[s("md-avatar",[s("md-icon",{staticClass:"md-size-2x md-primary"},[e._v("accessibility")])],1),e._v(" "),s("div",{staticClass:"md-list-text-container"},[s("h2",[s("a",{attrs:{href:"#",target:"_blank"}},[e._v("\n             "+e._s(t.products[0].description.toLowerCase())+", "+e._s(t.products[1].description.toLowerCase())+"\n              ")])]),e._v(" "),s("span",[e._v("Treatment Date: "+e._s(t.treatmentDate))]),e._v(" "),s("p",[e._v(e._s(t.narrative.join().toLowerCase()))])])],1),e._v(" "),s("md-divider",{staticClass:"md-inset"})],1)}))],1)},staticRenderFns:[]}},,,,function(e,t){}],[0]);
//# sourceMappingURL=app.f8074c7f11919ea94376.js.map